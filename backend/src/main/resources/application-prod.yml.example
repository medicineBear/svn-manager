# 生产环境配置示例
# 复制此文件为 application-prod.yml 并根据实际情况修改配置
# 启动时使用: java -jar app.jar --spring.profiles.active=prod

spring:
  datasource:
    # 生产环境使用 PostgreSQL
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:svnmanager}
    username: ${DB_USERNAME:svnmanager}
    password: ${DB_PASSWORD:svnmanager}
    
    # 连接池配置（生产环境建议增加）
    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

# MyBatis 配置
mybatis:
  configuration:
    # 生产环境不使用控制台输出SQL
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl

# CORS配置（生产环境必须指定具体域名）
# 多个域名用逗号分隔，例如: https://example.com,https://www.example.com
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# JWT 配置
jwt:
  # 生产环境必须通过环境变量设置，不能使用默认值
  # 建议使用至少32字符的强随机密钥
  secret: ${JWT_SECRET}
  expiration: 7200000 # 2小时，单位：毫秒
  header: Authorization
  prefix: Bearer

# 日志配置
logging:
  level:
    root: WARN
    com.isc.svnmanager: INFO
  # 生产环境建议使用文件日志
  file:
    name: ${LOG_FILE_PATH:./logs/svn-manager.log}
    max-size: 10MB
    max-history: 30
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# 服务器配置
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /api

